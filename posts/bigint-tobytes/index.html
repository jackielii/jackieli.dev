<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-language content="en"><meta name=color-scheme content="light dark"><meta name=author content="Jackie Li"><meta name=description content="Difference between toBytes & fromBytes on BigInt"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="BigInt toBytes in different languages"><meta name=twitter:description content="Difference between toBytes & fromBytes on BigInt"><meta property="og:title" content="BigInt toBytes in different languages"><meta property="og:description" content="Difference between toBytes & fromBytes on BigInt"><meta property="og:type" content="article"><meta property="og:url" content="https://jackieli.dev/posts/bigint-tobytes/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-07-24T11:00:17+01:00"><meta property="article:modified_time" content="2020-07-24T11:00:17+01:00"><title>BigInt toBytes in different languages · jackieli.dev</title><link rel=canonical href=https://jackieli.dev/posts/bigint-tobytes/><link rel=preload href="https://jackieli.dev/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=https://jackieli.dev/css/coder.min.3219ef62ae52679b7a9c19043171c3cd9f523628c2a65f3ef247ee18836bc90b.css integrity="sha256-MhnvYq5SZ5t6nBkEMXHDzZ9SNijCpl8+8kfuGINryQs=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://jackieli.dev/css/coder-dark.min.e78e80fc3a585a4d1c8fc7f58623b6ff852411e38431a9cd1792877ecaa160f6.css integrity="sha256-546A/DpYWk0cj8f1hiO2/4UkEeOEManNF5KHfsqhYPY=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=https://jackieli.dev/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://jackieli.dev/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=https://jackieli.dev/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=https://jackieli.dev/images/apple-touch-icon.png><script defer src=https://twemoji.maxcdn.com/v/13.0.2/twemoji.min.js integrity=sha384-wyB/MspSJ/r2bT2kCj44qtsYRYlpzO2oAPhRj5myrWD63dt6qWv4x8AZe7Fl3K3b crossorigin=anonymous></script><meta name=generator content="Hugo 0.84.1"></head><body class="preload-transitions colorscheme-auto" onload=twemoji.parse(document.body)><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://jackieli.dev/>jackieli.dev</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://jackieli.dev/about/>About</a></li><li class=navigation-item><a class=navigation-link href=https://jackieli.dev/posts/>Posts</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://jackieli.dev/posts/bigint-tobytes/>BigInt toBytes in different languages</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2020-07-24T11:00:17+01:00>24 Jul 2020</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
One-minute read</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=https://jackieli.dev/tags/bigint/>bigint</a></span>
<span class=separator>•</span>
<span class=tag><a href=https://jackieli.dev/tags/go/>go</a></span>
<span class=separator>•</span>
<span class=tag><a href=https://jackieli.dev/tags/java/>java</a></span>
<span class=separator>•</span>
<span class=tag><a href=https://jackieli.dev/tags/kotlin/>kotlin</a></span>
<span class=separator>•</span>
<span class=tag><a href=https://jackieli.dev/tags/javascript/>javascript</a></span>
<span class=separator>•</span>
<span class=tag><a href=https://jackieli.dev/tags/typescript/>typescript</a></span></div></div></header><div><p>Go & Javascript seems to be doing the same thing on BigInt: toBytes returns the absolute value of bytes. While Java returns the two&rsquo;s complement representation</p><h3 id=javascript>javascript
<a class=heading-link href=#javascript><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ node
&gt; BigInt(-257).toString(16)
<span style=color:#0ff;font-weight:700>&#39;-101&#39;</span>
&gt; BigInt(257).toString(16)
<span style=color:#0ff;font-weight:700>&#39;101&#39;</span>
&gt;
</code></pre></div><p>It&rsquo;s basically the sign plus the hex of the absolute value</p><h3 id=go>Go
<a class=heading-link href=#go><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#fff;font-weight:700>package</span> main

<span style=color:#fff;font-weight:700>import</span> (
	<span style=color:#0ff;font-weight:700>&#34;fmt&#34;</span>
	<span style=color:#0ff;font-weight:700>&#34;math/big&#34;</span>
)

<span style=color:#fff;font-weight:700>func</span> main() {
	fmt.Printf(<span style=color:#0ff;font-weight:700>&#34;%#v&#34;</span>, big.NewInt(-<span style=color:#ff0;font-weight:700>257</span>).Bytes())
}

<span style=color:#007f7f>// output
</span><span style=color:#007f7f>// []byte{0x1, 0x1}
</span></code></pre></div><p>From <code>big.Int.Bytes()</code> <a href="https://pkg.go.dev/math/big?tab=doc#Int.Bytes">documentation</a>:</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>Bytes returns the absolute value of x as a big-endian byte slice.
</code></pre></div><h3 id=java--kotlin>java / kotlin
<a class=heading-link href=#java--kotlin><i class="fa fa-link" aria-hidden=true></i></a></h3><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin>println(Arrays.toString(BigDecimal(<span style=color:#0ff;font-weight:700>&#34;-257&#34;</span>).unscaledValue().toByteArray()))

<span style=color:#007f7f>// output
</span><span style=color:#007f7f>// [-2, -1]
</span></code></pre></div><p>The doc says:</p><div class=highlight><pre style=color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt>Returns a byte array containing the two&#39;s-complement representation of this
BigInteger. The byte array will be in big-endian byte-order: the most
significant byte is in the zeroth element. The array will contain the minimum
number of bytes required to represent this BigInteger, including at least one
sign bit, which is (ceil((this.bitLength() + 1)/8)). (This representation is
compatible with the (byte[]) constructor.)
</code></pre></div><p>Comments: <a href=https://www.reddit.com/r/javascript/comments/i1qpco/bigint_to_bytes_in_javascript_java_go/>reddit</a></p></div><footer><section class=see-also></section></footer></article></section></div><footer class=footer><section class=container>©
2019 -
2021
Jackie Li
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=https://jackieli.dev/js/coder.min.03b17769f4f91ae35667e1f2a1ca8c16f50562576cf90ff32b3179926914daa5.js integrity="sha256-A7F3afT5GuNWZ+HyocqMFvUFYlds+Q/zKzF5kmkU2qU="></script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-173573373-1','auto'),ga('send','pageview'))</script></body></html>